<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>zach walton</title>
    <description>software engineer @ Ô£ø in the san francisco bay area. good at dance dance revolution. into mountain biking, paddleboarding, backpacking, and video games.
</description>
    <link>http://zachwalton.com/</link>
    <atom:link href="http://zachwalton.com/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Mon, 12 Sep 2016 14:03:58 -0700</pubDate>
    <lastBuildDate>Mon, 12 Sep 2016 14:03:58 -0700</lastBuildDate>
    <generator>Jekyll v3.1.6</generator>
    
      <item>
        <title>fill your git prompt with emoji</title>
        <description>&lt;p&gt;every programmer should consider it a duty to put emoji everywhere they can be rendered. i use &lt;a href=&quot;https://github.com/git/git/blob/master/contrib/completion/git-prompt.sh&quot;&gt;git-prompt.sh&lt;/a&gt; to track my repo status, but by default it‚Äôs a bit drab. luckily, it‚Äôs pretty easy to spruce up.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://gist.github.com/zachwalton/c601a8057d1bf80aac1dc1215f7d9e45&quot;&gt;here‚Äôs the emoji version.&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;to install (note: only tested with bash, and will override existing &lt;code class=&quot;highlighter-rouge&quot;&gt;$PROMPT_COMMAND&lt;/code&gt;):&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;curl -o ~/.git-prompt.sh https://gist.githubusercontent.com/zachwalton/c601a8057d1bf80aac1dc1215f7d9e45/raw/99862b8e30ac3d41662dffa927e5054ba4e72b51/git-prompt.sh
cat &lt;span class=&quot;sh&quot;&gt;&amp;lt;&amp;lt;EOF | tee -a ~/.bash_profile
# load git prompt
. ~/.git-prompt.sh

export GIT_PS1_SHOWDIRTYSTATE=true
export GIT_PS1_SHOWUNTRACKEDFILES=true
export GIT_PS1_SHOWUPSTREAM=true

export PROMPT_COMMAND=&#39;__git_ps1&#39;

&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;EOF&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;your prompt should now look like this in git working directories:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/prompt.jpg&quot; alt=&quot;emoji prompt&quot; /&gt;&lt;/p&gt;

&lt;p&gt;key:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;üöΩ : unstaged (dirty)&lt;/li&gt;
  &lt;li&gt;‚ÅâÔ∏è : untracked&lt;/li&gt;
  &lt;li&gt;‚úÖ : staged&lt;/li&gt;
  &lt;li&gt;üì¨ : ahead of upstream&lt;/li&gt;
  &lt;li&gt;üì™ : behind upstream&lt;/li&gt;
  &lt;li&gt;üÜó : synced upstream&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;enjoy!&lt;/p&gt;

</description>
        <pubDate>Sun, 17 Jul 2016 15:31:00 -0700</pubDate>
        <link>http://zachwalton.com/2016/07/17/emoji-your-git-prompt.html</link>
        <guid isPermaLink="true">http://zachwalton.com/2016/07/17/emoji-your-git-prompt.html</guid>
        
        
      </item>
    
      <item>
        <title>ü§ñ  $(git commit -m &quot;initial commit&quot;)</title>
        <description>&lt;p&gt;old blog posts are hosted on &lt;a href=&quot;https://zachwalton.blogspot.com&quot;&gt;blogspot&lt;/a&gt;.&lt;/p&gt;

</description>
        <pubDate>Sun, 17 Jul 2016 09:28:18 -0700</pubDate>
        <link>http://zachwalton.com/2016/07/17/first-post.html</link>
        <guid isPermaLink="true">http://zachwalton.com/2016/07/17/first-post.html</guid>
        
        
      </item>
    
      <item>
        <title>why is httpd using so much memory, ffs?</title>
        <description>&lt;p&gt;let‚Äôs find out.&lt;/p&gt;

&lt;p&gt;first, take a look at the memory mappings consuming the most memory (PID 8833 is an httpd.worker instance):&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;grep Rss /proc/8833/smaps | sort -k2 -n | tail -1
Rss:              121752 kB
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;grep 121752 /proc/8833/smaps -B 5
...
7f3fa8000000-7f3faf6e7000 rw-p 00000000 00:00 0
...&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;generate a core file:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;gcore 8833
Saved corefile core.8833&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;convert the beginning of the range to decimal, get the length of the range:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;START_RANGE &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 7f3fa8000000 &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 139911378239488
END_RANGE &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 7f3faf6e7000 &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; 139911502917632
DIFFERENCE &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 124678144
OUTPUT_FORMAT &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; s &lt;span class=&quot;c&quot;&gt;# string&lt;/span&gt;
UNIT &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; b &lt;span class=&quot;c&quot;&gt;# bytes&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;dump that section of memory as a string:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;gdb /opt/geo/httpd/sbin/httpd.worker core.8833 -ex &lt;span class=&quot;s2&quot;&gt;&quot;x/&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;DIFFERENCE&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;OUTPUT_FORMAT&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;UNIT&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;START_RANGE&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; | grep -v &lt;span class=&quot;se&quot;&gt;\&quot;\&quot;&lt;/span&gt; | tee gdb.out
&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;gdb /opt/geo/httpd/sbin/httpd.worker core.8833 -ex &lt;span class=&quot;s2&quot;&gt;&quot;x/124678144sb 139911378239488&quot;&lt;/span&gt; | grep -v &lt;span class=&quot;se&quot;&gt;\&quot;\&quot;&lt;/span&gt; | tee gdb.out&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;inspect. in my case, it was an inefficient database query running in cron (via an HTTP endpoint) that was stacking up on prior queries, resulting in a slow (but substantial) memory leak.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;grep SELECT gdb.out | wc -l
6927&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

</description>
        <pubDate>Tue, 27 Oct 2015 12:31:00 -0700</pubDate>
        <link>http://zachwalton.com/2015/10/27/why-is-httpd-using-so-much-memory.html</link>
        <guid isPermaLink="true">http://zachwalton.com/2015/10/27/why-is-httpd-using-so-much-memory.html</guid>
        
        
      </item>
    
  </channel>
</rss>
